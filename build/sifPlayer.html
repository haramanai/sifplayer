<html lang='en'>
<head>
<meta charset='utf-8' />
</head>
<body onload="main()">
<div id='sifPlayer'></div>
<canvas id="canvas" width="640" height="480"></canvas>
<script type='text/javascript' src="../libs/Ticker.js"></script>
<script type='text/javascript' src="../libs/tweenjs-0.4.0.min.js"></script>
<script type='text/javascript' src="sifplayer.min.js"></script>
<script type='text/javascript' src="../src/tools/helper.js"></script>
<script type='text/javascript'>
function main() {
	var xmlDoc = loadXML('test.sif');
	var canvas = document.getElementById('canvas');
	var ctx = canvas.getContext('2d');


	
	var so = new sifPlayer.SifObject(xmlDoc , {x: 0, y: 0 , width: 320, height: 240, sifPath: 'assets/'});
	so.timeline.loop = true;
	so.timeline.setPaused( false );

	//console.log(so.desc['NewBLine162 Region'].tweens[0]);
	var looper = {

		tick: function (delta) {
			canvas.height = 0;
			canvas.height = 640;
			canvas.width = 480;
			so.tick(delta);
			so.draw();
			ctx.drawImage(so.dCanvas, 0 , 0);
		}
	}
	
	createjs.Ticker.useRaf = false;
	createjs.Ticker.addListener(looper);
	
}

function loadXML (file) {
	if (window.XMLHttpRequest)
	{// code for IE7+, Firefox, Chrome, Opera, Safari
		var xmlhttp=new XMLHttpRequest();

	} else {// code for IE6, IE5
		var xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.open("GET",file,false);
	xmlhttp.send();
	var xmlDoc=xmlhttp.responseXML;
	return xmlDoc;
}

</script>
</body>
</html>
